---
import iconMenu from 'lucide-static/icons/menu.svg?raw';
import iconX from 'lucide-static/icons/x.svg?raw';
import * as styles from '../styles/components.css';
import { size } from '../styles/constants';
import Icon from './Icon.astro';
import { stateId } from './menu-selectors';
import './Menu.css';
---

<label
  for={stateId}
  class={styles.iconButton}
  tabindex="0"
  role="button"
  aria-label="Toggle navigation menu"
>
  <Icon size={size.buttonIcon} svg={iconMenu} />
  <Icon size={size.buttonIcon} svg={iconX} />
</label>

<script>
  import { stateId } from './menu-selectors';

  const state: HTMLInputElement = document.querySelector(`#${stateId}`)!;
  const button: HTMLLabelElement = document.querySelector(`[for="${stateId}"]`)!;

  button.addEventListener('keypress', ({ key }) => {
    if (key === ' ' || key === 'Enter') {
      state.checked = !state.checked;
    }
  });
</script>
